{% extends "main/base.html" %}
<!--тег для работы с переводами-->
{% load i18n %}

{% block content %}
{% load static %}
<body style="font-family: Montserrat">
<main>
    <section class="skrollable pb-5"
             style="background-image: linear-gradient(0deg, rgba(51, 51, 51, 0.9), rgba(51, 51, 51, 0.9)), url({% static 'images/3.jpg' %});
    background-attachment: fixed; background-position: 50% 50%; background-repeat: repeat">

        <div class="container-fluid pt-4">
            <div class="col-lg-12 bg-dark text-center"
                 style="--bs-bg-opacity: .7; border-radius: 50px;">
                <div class="row">
                    <div class="col-4">
                        <img src="/{{client.logo}}" alt="" height="200px" width="auto" class="my-4"
                             style="border-radius: 15px;">
                    </div>
                    <div class="col-7"><h4 class="text-start ms-5">Добро пожаловать в {{ client.name }}</h4>
                        <p class="text-start ms-2 my-1 fst-italic text-body">Время работы: {{ client.working_time }}</p>
                        <p class="text-start ms-2 my-1 text-body">г.{{client.city}}, {{client.address}}; Телефон:
                            {{client.phone}}</p>
                        <p class="text-start ms-2 my-2">{{ client.description }}</p>
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-sm-2">
                                    <p class="text-start mt-0 text-body">{% trans 'Самовывоз' %}:</p>
                                    <p class="text-start my-0 text-body">{% trans 'Доставка' %}:</p>
                                </div>
                                <div class="col-3">
                                    <p class="text my-0">
                                        {% if client.outside %}
                                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"
                                             fill="currentColor"
                                             class="bi bi-check text-light bg-success mt-0" viewBox="0 0 16 16"
                                             style="border-radius: 25px;">
                                            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                                        </svg>
                                        {% else %}
                                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white"
                                             class="bi bi-x bg-danger mt-3" viewBox="0 0 16 16"
                                             style="border-radius: 25px;">
                                            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                                        </svg>
                                        {% endif %}
                                    </p>
                                    <p class="">
                                        {% if client.delivery %}
                                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"
                                             fill="currentColor"
                                             class="bi bi-check text-light bg-success my-3" viewBox="0 0 16 16"
                                             style="border-radius: 25px;"> viewBox="0 0 16 16">
                                            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                                        </svg>
                                        {% else %}
                                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white"
                                             class="bi bi-x bg-danger my-3" viewBox="0 0 16 16"
                                             style="border-radius: 25px;">
                                            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                                        </svg>
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>

        <h2 class="text-center pt-4 fw-bold" style="color: #fd7014">{% trans 'МЕНЮ' %}</h2>

        <div class="sticky-top">
            <div class="container pt-3 text-center">
                <div class="row">
                    <div class="col-12">
                        {% for ft in food_type %}
                        <div class="btn fs-5 bg-dark mx-2 shadow-lg"
                             style="color: #fd7014; font-family: Montserrat; --bs-bg-opacity: .8; border-radius: 50px;">
                            {{ ft }}
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        {% for ft in food_type %}
        <h2 class="mx-5">{{ ft }}</h2>
        <div class="container-fluid my-3">
            <div class="row gy-3 mx-auto justify-content-center">
                {% for dish in dishes %}
                {% if dish.food_type == ft and dish.stop == False %}
                <div class="col-lg-5 bg-dark col-sm-12 mx-1"
                     style="--bs-bg-opacity: .7; border-radius: 50px;">
                    <div class="row">
                        <div class="col-lg-4 col-sm-4 text-center">
                            <img src="/{{ dish.image }}" alt="" height="100px" width="135px"
                                 class="img my-3"
                                 style="border-radius: 25px;">
                        </div>
                        <div class="col-lg-5 col-sm-4 text-start">
                            <h5 class=" mb-0 fw-bold">{{ dish.name }}</h5>
                            <p class=" fs-6">{{ dish.description }}</p>
                        </div>
                        <div class="col-lg-3 col-sm-4 text-center">
                            {% if dish.old_price > dish.actual_price %}
                            <del class="my-1 ms-1">{{ dish.old_price }}</del>
                            ₸
                            {% endif %}
                            <p class="my-1 ms-1 fs-5 fw-bold">{{ dish.actual_price }} ₸</p>


                            <button class="btn btn-success my-1"></button>

                            <!--       Add to cart form       -->
                            <!--       Add to cart form       -->
                            <form class="add-to-cart-form">
                                {% csrf_token %}
                                <input type="hidden" name="product_id" value="{{ product.id }}">
                                <input type="number" name="quantity" value="1" style="width: 50px;">

                                <button class="btn btn-success my-1" type="submit">{% trans 'Добавить' %}</button>
                            </form>

                            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                            <script>
    $(document).ready(function() {
        $(".add-to-cart-form").submit(function(e) {
            e.preventDefault();
            var form = $(this);
            var url = form.attr('action');
            var formData = new FormData(form[0]);

            $.ajax({
                type: 'POST',
                url: url,
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    // handle success response
                },
                error: function(xhr, status, error) {
                    // handle error response
                }
            });
        });
    });

                            </script>


                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </section>
</main>
</body>
{% endblock content %}